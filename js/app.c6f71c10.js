(function(e){function t(t){for(var s,r,i=t[0],u=t[1],c=t[2],l=0,m=[];l<i.length;l++)r=i[l],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&m.push(o[r][0]),o[r]=0;for(s in u)Object.prototype.hasOwnProperty.call(u,s)&&(e[s]=u[s]);d&&d(t);while(m.length)m.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],s=!0,i=1;i<n.length;i++){var u=n[i];0!==o[u]&&(s=!1)}s&&(a.splice(t--,1),e=r(r.s=n[0]))}return e}var s={},o={app:0},a=[];function r(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=s,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var d=u;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var s=n("85ec"),o=n.n(s);o.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("0cdd");var s=n("2b0e"),o=n("5f5b");n("ab8b"),n("2dd8");s["default"].use(o["a"]);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("login"),n("queue")],1)},r=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",[n("b-row",[n("b-col",[n("h1",[e._v("Anmeldung")])])],1),n("b-row",[n("b-col",[n("b-form-input",{directives:[{name:"show",rawName:"v-show",value:!e.$store.state.loggedIn,expression:"!$store.state.loggedIn"}],attrs:{placeholder:"Nutzername"},model:{value:e.inputName,callback:function(t){e.inputName=t},expression:"inputName"}}),n("p",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.loggedIn,expression:"$store.state.loggedIn"}]},[e._v("Angemeldet als "),n("b",[e._v(e._s(e.inputName))])])],1),n("b-col",{attrs:{md:"auto"}},[n("b-button",{directives:[{name:"show",rawName:"v-show",value:e.inputName.length>0&&!e.$store.state.loggedIn,expression:"inputName.length>0 && !$store.state.loggedIn"}],attrs:{variant:"primary"},on:{click:e.login}},[e._v("Anmelden")]),n("b-button",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.loggedIn,expression:"$store.state.loggedIn"}],attrs:{variant:"secondary"},on:{click:e.logout}},[e._v("Abmelden")])],1)],1)],1)},u=[],c={data:function(){return{inputName:""}},mounted:function(){this.$cookies.isKey("loggedIn")&&"true"===this.$cookies.get("loggedIn")&&(this.$store.state.loggedIn=!0,this.inputName=this.$cookies.get("login"),this.$store.state.user=this.$cookies.get("login"),this.$socket.emit("auth",{name:this.$store.state.user}))},methods:{login:function(){this.$cookies.set("login",this.inputName),this.$cookies.set("loggedIn",!0),this.$store.state.user=this.inputName,this.$store.state.loggedIn=!0,this.$socket.emit("auth",{name:this.$store.state.user})},logout:function(){this.$cookies.remove("login"),this.$cookies.remove("loggedIn"),this.$cookies.set("loggedIn",!1),this.$store.state.user="",this.$store.state.loggedIn=!1,this.$store.state.admin=!1}}},d=c,l=n("2877"),m=Object(l["a"])(d,i,u,!1,null,null,null),h=m.exports,g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{staticStyle:{"margin-top":"50px"}},[n("b-row",[n("b-col",[n("h1",[e._v("Warteschlange")])]),n("b-col",{directives:[{name:"show",rawName:"v-show",value:!0===e.$store.state.loggedIn,expression:"$store.state.loggedIn===true"}],attrs:{md:"auto"}},[n("b-button",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.admin,expression:"$store.state.admin"}],staticStyle:{"margin-right":"10px"},attrs:{variant:"secondary"},on:{click:e.dummyData}},[e._v("DummyData")]),n("b-button",{attrs:{variant:"primary"},on:{click:e.addToQueue}},[e._v("In Warteschlange")])],1)],1),n("b-row",{directives:[{name:"show",rawName:"v-show",value:!e.connected,expression:"!connected"}]},[e._v(" "+e._s(e.connectedMsg)+" ")]),n("b-row",e._l(e.queue,(function(t){return n("b-card",{directives:[{name:"show",rawName:"v-show",value:e.connected,expression:"connected"}],key:t.id,staticClass:"user"},[n("b-card-title",[e._v(" "+e._s(t.name)+" "),n("b-button",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.admin&&t.id>1,expression:"$store.state.admin && user.id>1"}],staticClass:"btton",attrs:{variant:"secondary"},on:{click:function(n){return e.move(t.id,"up")}}},[n("b-icon",{attrs:{icon:"caret-up"}})],1),n("b-button",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.admin&&t.id<e.queue.length,expression:"$store.state.admin && user.id<queue.length"}],staticClass:"btton",attrs:{variant:"secondary"},on:{click:function(n){return e.move(t.id,"down")}}},[n("b-icon",{attrs:{icon:"caret-down"}})],1),n("b-button",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.admin||e.$store.state.user===t.name,expression:"$store.state.admin || $store.state.user===user.name"}],staticClass:"button",attrs:{variant:"primary"},on:{click:function(n){return e.removeFromQueue(t.id)}}},[n("b-icon",{attrs:{icon:"trash"}})],1)],1),n("b-card-sub-title")],1)})),1)],1)},v=[],p=(n("b0c0"),{data:function(){return{queue:[],connectedMsg:"Keine Verbindung zum Server",connected:!1}},sockets:{connect:function(){console.log("socket connected"),this.connected=!0,this.connectedMsg="Mit Server verbunden"},disconnect:function(){console.log("socket disconnected"),this.connected=!1,this.connectedMsg="Verbindung getrennt"},auth:function(e){console.log("message-channel"),console.log(e),this.msg=e}},mounted:function(){var e=this;this.sockets.subscribe("init-queue",(function(t){e.queue=t})),this.sockets.subscribe("add-user",(function(t){e.queue.push(t)})),this.sockets.subscribe("admin",(function(t){t.name===e.$store.state.user&&t.admin?e.$store.state.admin=!0:t.name!==e.$store.state.user||t.admin||(e.$store.state.admin=!1)}))},methods:{addToQueue:function(){this.$socket.emit("add",{name:this.$store.state.user})},removeFromQueue:function(e){this.$socket.emit("remove",{id:e})},move:function(e,t){this.$socket.emit("move",{id:e,dir:t})},dummyData:function(){this.$socket.emit("add",{name:"test1"}),this.$socket.emit("add",{name:"test2"}),this.$socket.emit("add",{name:"test3"}),this.$socket.emit("add",{name:"test4"}),this.$socket.emit("add",{name:"test5"})}}}),f=p,b=(n("7dca"),Object(l["a"])(f,g,v,!1,null,null,null)),$=b.exports,w={name:"App",components:{login:h,queue:$}},k=w,y=(n("034f"),Object(l["a"])(k,a,r,!1,null,null,null)),_=y.exports,x=n("5132"),N=n.n(x),I=n("2f62"),O=n("b1e0");s["default"].use(O["a"]),s["default"].config.productionTip=!1,s["default"].use(n("2b27")),s["default"].$cookies.config("7d"),s["default"].use(new N.a({debug:!0,connection:"https://queue.glados.itmr-dev.de",options:{}})),s["default"].use(I["a"]);var j=new I["a"].Store({state:{user:"",loggedIn:!1,admin:!1}});new s["default"]({store:j,render:function(e){return e(_)}}).$mount("#app")},"7dca":function(e,t,n){"use strict";var s=n("e2e5"),o=n.n(s);o.a},"85ec":function(e,t,n){},e2e5:function(e,t,n){}});
//# sourceMappingURL=app.c6f71c10.js.map